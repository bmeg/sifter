<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  
  <title>lookup &middot; Sifter</title>
  

  
  <link rel="stylesheet" href="https://bmeg.github.io/sifter/css/poole.css">
  <link rel="stylesheet" href="https://bmeg.github.io/sifter/css/darcula.css">
  <link rel="stylesheet" href="https://bmeg.github.io/sifter/css/syntax.css">
  <link rel="stylesheet" href="https://bmeg.github.io/sifter/css/theme.css">
  <link rel="stylesheet" href="https://bmeg.github.io/sifter/css/funnel.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  <script src="https://bmeg.github.io/sifter/js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

</head>
<body>

  <div class="global-header">
    <div class="global-header-container">
      <div class="global-header-home">
        <a href="https://bmeg.github.io/sifter"><h1>Sifter</h1></a>
      </div>
      <ul class="global-header-nav">
          <li><a href="https://github.com/bmeg/sifter/releases">Download</a></li>
          <li><a href="https://bmeg.github.io/sifter/docs/">Docs</a></li>
          <li><a href="https://github.com/bmeg/sifter">GitHub</a></li>
        </ul>
    </div>
  </div>


<div class="content section group">

  <div class="sidebar col span_3_of_12">
    <ul class="sidebar-nav">
      
      
        
        <li>
          
          <a href="/sifter/docs/"
             class="sidebar-nav-item "
          >Overview</a></li>
          
        
        <li>
          
          <a href="/sifter/docs/example/"
             class="sidebar-nav-item "
          >Example</a></li>
          
        
        <li>
          
          
          <span class="intermediate"><a href="/sifter/docs/inputs/">Inputs</a></span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/inputs/avroload/"
                   class="sidebar-nav-item "
                >avroLoad</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/inputs/embedded/"
                   class="sidebar-nav-item "
                >embedded</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/inputs/glob/"
                   class="sidebar-nav-item "
                >glob</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/inputs/plugin/"
                   class="sidebar-nav-item "
                >input plugin</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/inputs/jsonload/"
                   class="sidebar-nav-item "
                >jsonLoad</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/inputs/sqldump/"
                   class="sidebar-nav-item "
                >sqldump</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/inputs/sqliteload/"
                   class="sidebar-nav-item "
                >sqliteLoad</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/inputs/tableload/"
                   class="sidebar-nav-item "
                >tableLoad</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/inputs/xmlload/"
                   class="sidebar-nav-item "
                >xmlLoad</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          
          <span class="intermediate"><a href="/sifter/docs/transforms/">Pipeline Steps</a></span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/accumulate/"
                   class="sidebar-nav-item "
                >accumulate</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/clean/"
                   class="sidebar-nav-item "
                >clean</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/debug/"
                   class="sidebar-nav-item "
                >debug</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/distinct/"
                   class="sidebar-nav-item "
                >distinct</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/emit/"
                   class="sidebar-nav-item "
                >emit</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/fieldparse/"
                   class="sidebar-nav-item "
                >fieldParse</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/fieldprocess/"
                   class="sidebar-nav-item "
                >fieldProcess</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/fieldtype/"
                   class="sidebar-nav-item "
                >fieldType</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/filter/"
                   class="sidebar-nav-item "
                >filter</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/flatmap/"
                   class="sidebar-nav-item "
                >flatMap</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/from/"
                   class="sidebar-nav-item "
                >from</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/graphbuild/"
                   class="sidebar-nav-item "
                >graphBuild</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/hash/"
                   class="sidebar-nav-item "
                >hash</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/lookup/"
                   class="sidebar-nav-item  active"
                >lookup</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/map/"
                   class="sidebar-nav-item "
                >map</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/objectvalidate/"
                   class="sidebar-nav-item "
                >objectValidate</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/project/"
                   class="sidebar-nav-item "
                >project</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/reduce/"
                   class="sidebar-nav-item "
                >reduce</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/regexreplace/"
                   class="sidebar-nav-item "
                >regexReplace</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/split/"
                   class="sidebar-nav-item "
                >split</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/tablewrite/"
                   class="sidebar-nav-item "
                >tableWrite</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/plugin/"
                   class="sidebar-nav-item "
                >transform plugin</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="/sifter/docs/transforms/uuid/"
                   class="sidebar-nav-item "
                >uuid</a></li>
            </ul>
          </li>
          
          
        
      
    </ul>
  </div>

  <div class="main col span_8_of_12">
    <h1 id="lookup">lookup</h1>
<p>Using key from current row, get values from a reference source</p>
<h2 id="parameters">Parameters</h2>
<table>
<thead>
<tr>
<th>name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>replace</td>
<td>string (field path)</td>
<td>Field to replace</td>
</tr>
<tr>
<td>lookup</td>
<td>string (template string)</td>
<td>Key to use for looking up data</td>
</tr>
<tr>
<td>copy</td>
<td>map[string]string</td>
<td>Copy values from record that was found by lookup. The Key/Value record uses the Key as the destination field and copies the field from the retrieved records using the field named in Value</td>
</tr>
<tr>
<td>tsv</td>
<td>TSVTable</td>
<td>TSV translation table file</td>
</tr>
<tr>
<td>json</td>
<td>JSONTable</td>
<td>JSON data file</td>
</tr>
<tr>
<td>table</td>
<td>LookupTable</td>
<td>Inline lookup table</td>
</tr>
<tr>
<td>pipeline</td>
<td>PipelineLookup</td>
<td>Use output of a pipeline as a lookup table</td>
</tr>
</tbody>
</table>
<h2 id="example">Example</h2>
<h3 id="json-file-based-lookup">JSON file based lookup</h3>
<p>The JSON file defined by <code>config.doseResponseFile</code> is opened and loaded into memory, using the <code>experiment_id</code> field as a primary key.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>    - <span style="color:#f92672">lookup</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">json</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">input</span>: <span style="color:#e6db74">&#34;{{config.doseResponseFile}}&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">key</span>: <span style="color:#ae81ff">experiment_id</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">lookup</span>: <span style="color:#e6db74">&#34;{{row.experiment_id}}&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">copy</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">curve</span>: <span style="color:#ae81ff">curve</span>
</span></span></code></pre></div><h3 id="pipeline-output-lookup">Pipeline output lookup</h3>
<p>Prepare a table in the pipelines <code>tableGen</code>. Then in <code>recordProcess</code> use that table, indexed by the field <code>primary_key</code> and lookup the value <code>{{row.table_id}}</code> to copy in the contents of the <code>other_data</code> field from the table and add it to the row as <code>my_data</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">pipelines</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">tableGen</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">from</span>: <span style="color:#ae81ff">dataFile</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#some set of transforms to prepair data</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#records look like { &#34;primary_key&#34; : &#34;bob&#34;, &#34;other_data&#34;: &#34;red&#34; }</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">recordProcess</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">from</span>: <span style="color:#ae81ff">recordFile</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">lookup</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">pipeline</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">from</span>: <span style="color:#ae81ff">tableGen</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">key</span>: <span style="color:#ae81ff">primary_key</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">lookup</span>: <span style="color:#e6db74">&#34;{{row.table_id}}&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">copy</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">my_data</span>: <span style="color:#ae81ff">other_data</span>
</span></span></code></pre></div><h4 id="example-data">Example data:</h4>
<p>tableGen</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>{ <span style="color:#f92672">&#34;primary_key&#34; : &#34;bob&#34;, &#34;other_data&#34;: </span><span style="color:#e6db74">&#34;red&#34;</span> }
</span></span><span style="display:flex;"><span>{ <span style="color:#f92672">&#34;primary_key&#34; : &#34;alice&#34;, &#34;other_data&#34;: </span><span style="color:#e6db74">&#34;blue&#34;</span> }
</span></span></code></pre></div><p>recordProcess input</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;id&#34;</span> : <span style="color:#e6db74">&#34;record_1&#34;</span>, <span style="color:#e6db74">&#34;table_id&#34;</span>:<span style="color:#e6db74">&#34;alice&#34;</span> }
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;id&#34;</span> : <span style="color:#e6db74">&#34;record_2&#34;</span>, <span style="color:#e6db74">&#34;table_id&#34;</span>:<span style="color:#e6db74">&#34;bob&#34;</span> }
</span></span></code></pre></div><p>recordProcess output</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;id&#34;</span> : <span style="color:#e6db74">&#34;record_1&#34;</span>, <span style="color:#e6db74">&#34;table_id&#34;</span>:<span style="color:#e6db74">&#34;alice&#34;</span>, <span style="color:#e6db74">&#34;my_data&#34;</span> : <span style="color:#e6db74">&#34;blue&#34;</span> }
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;id&#34;</span> : <span style="color:#e6db74">&#34;record_2&#34;</span>, <span style="color:#e6db74">&#34;table_id&#34;</span>:<span style="color:#e6db74">&#34;bob&#34;</span>, <span style="color:#e6db74">&#34;my_data&#34;</span> : <span style="color:#e6db74">&#34;red&#34;</span> }
</span></span></code></pre></div>
  </div>

</div>
</body>
</html>
